# CHANGELOG

## 2026-02-15

- 调整 `records` 页提供商染色策略：覆盖 `GeminiCLI`、`Vertex`、`AIStudio`、`Antigravity`、`Claude`、`Codex`、`Qwen`、`Kimi`、`iFlow`（大小写不敏感），提升来源识别度与颜色区分度。

## 2026-02-14

- 新增凭证映射与 `source` 相关能力，统一凭证展示/筛选口径，减少跨页面筛选不一致。
- `records` 页面升级列管理（显隐、排序、宽度、自适应、持久化）与交互样式，提升可读性和可操作性。
- 新增/完善提供商字段展示与相关查询，便于按来源识别调用记录。
- `explore` 增加按 Key/凭证过滤与下拉候选，提升探索效率。
- `/api/sync` 为 `/auth-files`（15s）和 `/usage`（60s）增加超时控制，并区分超时/普通错误，避免上游阻塞拖垮同步请求。
- `records` 同步失败/超时改为悬浮窗报错（含错误样式），让超时信息更直观可见。
- `records` 同步反馈新增 warning 态：当前端收到 `/api/sync` 的 `authFilesWarning` 时以黄色提示展示“部分成功”，并在有入库时附带同步条数，减少用户误判。

## 2026-02-13

- 修复时区配置与 SQL 分组问题，避免统计在不同时区下出现偏差。

## 2026-02-12

- 仪表盘图表改进（组合图/错误指标/线条样式）并补充记录页路由显示控制，增强可视化表达。

## 2026-02-10

- 升级开发依赖（`@types/node`、`drizzle-kit`），保持工具链稳定。

## 2026-02-07

- 升级 `recharts`，改进图表兼容性与表现。

## 2026-02-04

- 概览 API 增加 `skipCache` 控制，便于在需要时获取最新统计。

## 2026-02-03

- 升级开发依赖（`eslint-config-next`、`@types/node`），提升开发体验。

## 2026-01-31

- 升级 `lucide-react`，更新图标依赖。

## 2026-01-29

- 升级 React 及类型依赖，保持框架版本一致。

## 2026-01-28

- 升级 `next` 与 `zod`，提升框架与校验库兼容性。

## 2026-01-27

- 模型价格同步链路集中优化（搜索、按钮交互、并发锁、304 处理、鉴权、免费模型/批量更新），提升同步稳定性与可用性。
- 调整状态提示与日期选择器样式，降低界面干扰并提升可读性。

## 2026-01-26

- 新增模型价格同步功能，为费用估算提供自动化数据来源。

## 2026-01-24

- 修复成本计算表达式引用，确保费用统计正确。

## 2026-01-23

- 完善同步与成本计费逻辑（含思考 token 计费），提高记录与费用准确性。

## 2026-01-22

- 仪表盘增加成功/失败原始计数展示，并调整迁移与请求统计字段逻辑，提升数据可解释性。

## 2026-01-21

- 上线调用记录页面与后端查询/API，并完善表格与日历样式，形成完整的记录管理能力。

## 2026-01-20

- 升级 `next` 与相关开发依赖，保持版本一致性。

## 2026-01-13

- 升级 `@types/node`，保持类型定义更新。

## 2026-01-11

- 优化筛选组件交互（动画、清除、状态切换）与小时维度图表能力（72h、柱状/面积切换）。
- 加入同步超时与状态修复，降低首屏阻塞风险。

## 2026-01-06

- 增加自定义时间范围、Modal 与探索页交互优化，并推进 Next.js 版本迁移，提升整体交互流畅度。

## 2026-01-05

- 调整请求数与 token 展示细节，提升数值展示直观性。

## 2026-01-03

- 引入并优化 Toast 状态提示机制，增强同步过程反馈。

## 2026-01-02

- 完善迁移脚本与构建流程，支持首次部署可用。
- 引入 `vercel/analytics` 并优化散点图 Y 轴动画。

## 2026-01-01

- 优化趋势图与探索图性能（仅渲染可视范围），并修复日志页与 tooltip 相关体验问题。

## 2025-12-31

- 优化探索图与仪表盘布局，补充 Modal 能力并调整 README/构建配置，提升整体可维护性。

## 2025-12-30

- 上线数据探索页与相关 API，补充缓存、同步、登录与错误处理等基础能力。
- 增加 CI/依赖管理与项目基础文件（如许可证、Dependabot），完善工程化。

## 2025-12-29

- 初始化鉴权中间件、同步接口结构与基础文档，形成项目最初可用版本。
## 2026-02-28

- 兼容 CLIProxyAPI 新版管理接口前缀：统一以 `\/v0\/management\/*` 拉取 usage / auth-files / usage-statistics-enabled。
- `/api/sync` 入库改为分批写入（每批 500 条），降低单次大 payload 导致插入失败的风险。
- 文档补充：`\/api\/user` 返回 `amp upstream proxy not available` 与看板同步链路的关系说明。
